<Window
    x:Class="MyAthenaeio.Views.Loans.LoanDetailWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:MyAthenaeio.Views.Loans"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Loan Details"
    Width="700"
    Height="1000"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">
    <Window.Resources>
        <ResourceDictionary Source="/Resources/Styles.xaml" />
    </Window.Resources>

    <Grid Background="{StaticResource DarkAcademiaBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Style="{StaticResource DarkAcademiaBorderStyle}">
            <TextBlock Style="{StaticResource HeaderTextBlockStyle}" Text="Loan Details" />
        </Border>

        <ScrollViewer
            Grid.Row="1"
            Margin="15"
            VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <GroupBox Header="Loan Information">
                    <Grid>
                        <Grid.Resources>
                            <Style BasedOn="{StaticResource {x:Type Label}}" TargetType="Label">
                                <Setter Property="Margin" Value="0,0,10,10" />
                            </Style>
                            <Style BasedOn="{StaticResource {x:Type TextBlock}}" TargetType="TextBlock">
                                <Setter Property="Margin" Value="0,0,0,10" />
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Label
                            Grid.Row="0"
                            Grid.Column="0"
                            Content="Book:" />
                        <TextBlock
                            x:Name="BookTextBlock"
                            Grid.Row="0"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center" />

                        <Label
                            Grid.Row="1"
                            Grid.Column="0"
                            Content="Copy #:" />
                        <TextBlock
                            x:Name="CopyTextBlock"
                            Grid.Row="1"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center" />

                        <Label
                            Grid.Row="2"
                            Grid.Column="0"
                            Content="Borrower:" />
                        <TextBlock
                            x:Name="BorrowerNameTextBlock"
                            Grid.Row="2"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center" />

                        <Label
                            Grid.Row="3"
                            Grid.Column="0"
                            Content="Contact:" />
                        <TextBlock
                            x:Name="BorrowerContactTextBlock"
                            Grid.Row="3"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center" />

                        <Label
                            Grid.Row="4"
                            Grid.Column="0"
                            Content="Loan Date:" />
                        <TextBlock
                            x:Name="LoanDateTextBlock"
                            Grid.Row="4"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center" />

                        <Label
                            Grid.Row="5"
                            Grid.Column="0"
                            Content="Due Date:" />
                        <TextBlock
                            x:Name="DueDateTextBlock"
                            Grid.Row="5"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center" />

                        <Label
                            Grid.Row="6"
                            Grid.Column="0"
                            Content="Return Date:" />
                        <TextBlock
                            x:Name="ReturnDateTextBlock"
                            Grid.Row="6"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center" />

                        <Label
                            Grid.Row="7"
                            Grid.Column="0"
                            Content="Renewals:" />
                        <TextBlock
                            x:Name="RenewalsTextBlock"
                            Grid.Row="7"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center" />

                        <Label
                            Grid.Row="8"
                            Grid.Column="0"
                            Content="Status:" />
                        <TextBlock
                            x:Name="StatusTextBlock"
                            Grid.Row="8"
                            Grid.Column="1"
                            Margin="5"
                            VerticalAlignment="Center"
                            FontWeight="Bold" />
                    </Grid>
                </GroupBox>

                <GroupBox Header="Notes">
                    <TextBox
                        x:Name="NotesTextBox"
                        Height="80"
                        AcceptsReturn="True"
                        TextWrapping="Wrap"
                        VerticalScrollBarVisibility="Auto" />
                </GroupBox>

                <GroupBox x:Name="RenewalHistoryGroupBox" Header="Renewal History">
                    <DataGrid
                        x:Name="RenewalHistoryDataGrid"
                        Height="160"
                        AutoGenerateColumns="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn
                                Width="150"
                                Binding="{Binding RenewalDate, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}"
                                Header="Renewal Date" />
                            <DataGridTextColumn
                                Width="130"
                                Binding="{Binding OldDueDate, StringFormat='{}{0:yyyy-MM-dd}'}"
                                Header="Old Due Date" />
                            <DataGridTextColumn
                                Width="130"
                                Binding="{Binding NewDueDate, StringFormat='{}{0:yyyy-MM-dd}'}"
                                Header="New Due Date" />
                            <DataGridTextColumn
                                Width="*"
                                Binding="{Binding Notes}"
                                Header="Notes" />
                        </DataGrid.Columns>
                    </DataGrid>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <StackPanel
            Grid.Row="2"
            Margin="15"
            HorizontalAlignment="Right"
            Orientation="Horizontal">
            <Button
                x:Name="ReturnButton"
                Click="Return_Click"
                Content="Return Book" />
            <Button
                x:Name="RenewButton"
                Click="Renew_Click"
                Content="Renew Loan" />
            <Button Click="SaveNotes_Click" Content="Save Notes" />
            <Button Click="Close_Click" Content="Close" />
        </StackPanel>
    </Grid>
</Window>
